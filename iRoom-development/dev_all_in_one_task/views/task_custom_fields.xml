<?xml version="1.0" encoding="UTF-8" ?>
<!--
Copyright (C) 2015 DevIntelle Consulting Service Pvt.Ltd (<http://www.devintellecs.com>).

For Module Support : devintelle@gmail.com  or Skype : devintelle
 -->
<odoo>
    <!-- Custom fields Tree View -->
    <record id="task_custom_fields_tree"  model="ir.ui.view">
        <field name="name">task.custom.fields.tree</field>
        <field name="model">task.custom.fields</field>
        <field name="arch" type="xml">
            <tree string="Task Custom Fields">
                <field name="name"/>
                <field name="task_model_id"/>
                <field name="type"/>
            </tree>
        </field>
    </record>

    <!-- Custom fields Form View -->
    <record id="task_custom_fields_form"  model="ir.ui.view" >
        <field name="name">task.custom.fields.form</field>
        <field name="model">task.custom.fields</field>
        <field name="arch" type="xml">
            <form string="Task Custom Fields">
                <sheet>
                    <group colspan="2">
                        <field name="name" required="1"/>
                        <field name="task_model_id" required="1"/>
                        <field name="type" required="1"/>
                        <!-- attrs="{'invisible':[('type','!=','selection')]}" -->
                        <field name="task_custom_options" invisible="type != 'selection'"  context="{'task_custom_id':active_id}" >
                            <tree editable="bottom">
                                <field name="name"/>
                            </tree>
                        </field>
                    </group>
                </sheet>
            </form>
        </field>
    </record>


    <!-- Custom fields action-->
    <record id="action_task_custom_fields" model="ir.actions.act_window">
        <field name="name">Task Custom Fields</field>
        <field name="res_model">task.custom.fields</field>
        <field name="view_mode">tree,form</field>
    </record>        


    <!-- Field Value Tree View -->
    <record id="task_field_value_tree" model="ir.ui.view">
        <field name="name">task.field.value.tree</field>
        <field name="model">task.custom.field.values</field>
        <field name="arch" type="xml">
            <tree string="Field Value">
                <field name="t_id" />
                <field name="task_custom_id"/>
                <field name="type" />
                <field name="value_ref"/>
            </tree>
        </field>
    </record>

    <!-- Field Value Form View -->
    <record id="task_field_value_form" model="ir.ui.view">
        <field name="name">task.field.value.form</field>
        <field name="model">task.custom.field.values</field>
        <field name="arch" type="xml">
            <form string="Task Field Value">
                <sheet>
                    <group colspan="2">
                        <field name="t_id"/>
                        <field name="task_custom_id"/>
                        <field name="type" readonly="1" />
                        <field name="value_ref" invisible="1"/>
                        <field name="value_integer" string="Value" invisible="type != 'integer'" />
   	    	         	<field name="value_float" string="Value" invisible="type != 'float'" />
                    	<field name="value_date" string="Value" invisible="type != 'date'" />
                    	<field name="value_datetime" string="Value" invisible="type != 'datetime'"/>
                    	<field name="value_text" string="Value" invisible="type != 'text'" />
                    	<field name="value_char" string="Value" invisible="type != 'char'" />
                    	<field name="value_binary" string="Value" invisible="type != 'binary'" />
                    	<field name="value_boolean" string="Value" invisible="type != 'boolean'" />
                    	<field name="task_custom_option" string="Value" invisible="type != 'selection'" domain="[('task_custom_id','=',task_custom_id)]" widget="selection"/>
                        <!-- <field name="value_integer" string="Value" attrs="{'invisible' : [('type', '!=', 'integer')]}"/>
   	    	         	<field name="value_float" string="Value" attrs="{'invisible' : [('type', '!=', 'float')]}"/>
                    	<field name="value_date" string="Value" attrs="{'invisible' : [('type', '!=', 'date')]}"/>
                    	<field name="value_datetime" string="Value" attrs="{'invisible' : [('type', '!=',  'datetime')]}"/>
                    	<field name="value_text" string="Value" attrs="{'invisible' : [('type', '!=',  'text')]}"/>
                    	<field name="value_char" string="Value" attrs="{'invisible' : [('type', '!=', 'char')]}"/>
                    	<field name="value_binary" string="Value" attrs="{'invisible' : [('type', '!=', 'binary')]}"/>
                    	<field name="value_boolean" string="Value" attrs="{'invisible' : [('type', '!=', 'boolean')]}"/>
                    	<field name="task_custom_option" string="Value" attrs="{'invisible' : [('type', '!=', 'selection')]}" domain="[('task_custom_id','=',task_custom_id)]" widget="selection"/> -->
                    </group>
                </sheet>
            </form>
        </field>
    </record>
    
    <!-- Field value action-->
     <record id="action_task_custom_values" model="ir.actions.act_window">
        <field name="name">Task Field Values</field>
        <field name="res_model">task.custom.field.values</field>
        <field name="view_mode">tree,form</field>
    </record>
    
    
    <!-- Custom field Base Menu -->
    <menuitem id="task_custom_fields_main_menu" name="Task Custom Fields" parent="project.menu_main_pm" sequence="110"/>
    
    <!-- Field Menu -->
    <menuitem id="task_custom_fields_attribute_menu" name="Fields" parent="task_custom_fields_main_menu" action="action_task_custom_fields" sequence="1"/>
    
    <!-- Values Menu -->
    <menuitem id="menu_attributes_values_custom" name="Values"  parent="task_custom_fields_main_menu" action="action_task_custom_values" sequence="2"/>
</odoo>
